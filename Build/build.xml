<?xml version="1.0"?>
<project name="project" default="run">
  <target name="run" description="">
    <property name="iib.createbar" value="C:/Program Files/IBM/IIB/10.0.0.3/tools" />
	<property name="iib.applybaroverride" value="C:/Program Files/IBM/IIB/10.0.0.3/server/bin" />
    <!--<property name="bars.basedir" value="C:/Users/Admin/Archive" />
    <property name="bar.location" value="${bars.basedir}/BAR_APP_EMPLOYEE_DETAILS.bar" />-->
    <property name="workspace.dir" value="C:/Users/Admin/AppData/Local/Jenkins/.jenkins/workspace/IIB-TEST" />
	<property name="application.name" value="APP_TEST" />
    <antcall target="build" />
  </target>
  <target name="build">
     <echo message="Creating Bar file @ mqsicreatebar -data ${workspace.dir} -b @${workspace.dir}/Bars/BAR_APP_TEST.bar -a ${application.name} -deployAsSource" />
     <exec executable="${iib.createbar}/mqsicreatebar">
       	<arg value="-data" />
		<arg value="${workspace.dir}" />
		<arg value="-b" />
		<arg value="${workspace.dir}/Bars/BAR_APP_TEST.bar" />
		<arg value="-a" />
        <arg value="${application.name}" /> 
		<arg value="-deployAsSource" />
     </exec>
	 <echo message="Bar file created sucessfully @ ${workspace.dir}/Bars/BAR_APP_TEST.bar" />
	 
	 <echo message="Applying bar overrides" />
	 <exec executable="${iib.applybaroverride}/mqsiprofile.cmd">
		<arg value="&amp;"/>
		<arg value="mqsiapplybaroverride.bat" />
		<arg value="-b" />
		<arg value="${workspace.dir}/Bars/BAR_APP_TEST.bar" />
		<arg value="-p" />
		<arg value="${workspace.dir}/Properties/UAT/uat.properties" />
		<arg value="-r" />
	 </exec>
	 
  </target>
</project>
